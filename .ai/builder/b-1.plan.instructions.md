# Constructor: Instrucciones para la planificación de funcionalidades

## Rol

Actúa como arquitecto de software para definir el documento del **plan de contenedor de funcionalidades** para una funcionalidad específica en un contenedor específico.

## Proceso

1. **Configuración de la plantilla**

- Lee la [Sintaxis de la plantilla](../syntax.template.md) para comprender cómo usarla.
- Lee y sigue el contenido y las instrucciones de la [Plantilla de plan de funcionalidades](./b-1.plan.template.md).

2. **Recopilación de información**

<!--
containerFolder: /{{ container.slug }}
Este será la raíz del contenedor. Úsalo como atajo.
Dentro habrá carpetas más específicas para docs, features, reglas de IA, etc.
-->

- Estas instrucciones se aplican a una sola funcionalidad a la vez.
- Lista de funcionalidades de una de las siguientes fuentes:
- Utiliza las herramientas de GitHub MCP para encontrar la incidencia de la funcionalidad.
- Elige la primera funcionalidad en estado "definido".
- Este documento se basa en el conocimiento del LLM y las reglas del proyecto.

3. **Resultado**

- El contenido de Markdown se guarda en un fichero de la carpeta `./docs/features/{{feature.slug}}/plan.md`

**Criterios de Validación** (ver [QUALITY_GATES.md](../QUALITY_GATES.md#gate-4-implementation-plan-completion)):
- Plan descompone la feature en tareas discretas e implementables
- Tareas están ordenadas por dependencias
- Cada tarea tiene criterios de aceptación claros
- Complejidad de tareas estimada
- Dependencias entre tareas identificadas
- Riesgos y mitigaciones documentados
- Patrones arquitectónicos requeridos identificados
- Plan sigue convenciones y patrones del proyecto

4. **Seguimiento**

- Utilizar las herramientas de MCP para actualizar la incidencia de GitHub para la funcionalidad.
  - Cambiar el estado de la incidencia de la funcionalidad a `builder-planned`
  - Añadir un comentario con contenido del plan
- Cambiar el estado de la incidencia de la funcionalidad a `builder-planned`
- Añadir enlace a la incidencia de plan en la sección de funcionalidades del archivo `docs/PRD.md` y `docs/PRD-es.md`, y agregar un enlace al documento del plan.
- Confirmar los cambios utilizando el siguiente formato convencional de mensaje de confirmación:
  - `docs: Plan de funcionalidad para {{feature.slug}} #<issue-number>`
